# End-To-End Тестване

Тестването End-To-End (E2E) е методология за тестване на софтуер, която проверява дали даден процес работи коректно от начало до край. Тестването End-To-End потвърждава, че всички компоненти на системата могат да работят при сценарии от реалния свят.

Целта на тази форма на тестване е да се симулира потребителски случай от началото до края. E2E тестването може да открие софтуерни зависимости, като същевременно валидира тестваната система, цялостта на данните и интеграции.

Тестването от край до край обикновено се извършва от QA екипи и се изпълнява в специални тестови среди. Това обикновено се случва след **unit** и **integration** тестване. Тестването от край до край започва от гледна точка на потребителя, симулирайки типичните операции, които приложението може да изпълнява.
## Задание

Вашето задание е да вземете следното [приложение](https://github.com/yordan-vladov/cypress-intro) и да добавите нови end-to-end тестове към него. След това трябва да добавите нова функционалност, която също да бъде тествана.

## Какво е приложението?

Приложението представлява проста форма за регистрация, съдържаща множество. Всяко от полетата се валидира за правилен вход.

![](/Attachments/SE-E2E-Pic-1.png)

Тази регистрационна форма е пример за компонент, който е подходящ за end-to-end тестване. Въпросът какъв инструмент ще се използва за тази цел.
### Cypress

Cypress е мощен инструмент за автоматизирано тестване на уеб приложения, използван главно за end-to-end тестове. Той работи директно в браузъра, предлагайки бързо и надеждно изпълнение на тестове, автоматично чакане на елементи, лесно дебъгване и възможност за правене на снимки и записи на видеа. Тестовете се пишат на JavaScript или TypeScript, което го прави достъпен за разработчици. Cypress се интегрира лесно с CI/CD системи и поддържа модерни уеб технологии, но има ограничена поддръжка за различни браузъри и не е подходящ за мобилни приложения.
#### Инсталиране на Cypress

За да инсталираме Cypress трябва да изпълним следната команда:

```bash
npm install cypress --save-dev
```

#### Пускане на Cypress

За да пуснем Cypress, трябва да влезем в директорията на приложението и да изпълним следната команда:

```bash
npx cypress open
```

![](/Attachments/SE-E2E-Pic-2.png)
Това ще отвори приложението на Cypress. След това трябва да изберем кои тестове искаме да изпълним. За нашето упражнение ние искаме да изберем `E2E Testing`.

След това трябва да изберем с кой браузър искаме изпълним тестовете (по ваш избор).

![](/Attachments/SE-E2E-Pic-3.png)
След това можем да изберем кои **Е2Е** да се изпълнят:

![](/Attachments/SE-E2E-Pic-4.png)

За сега има само една група от тестове - `registration`. Изберете я и вижте какво се случва.

#### Как работи Cypress

В проекта има папка `cypress`, която пази всичките Cypress тестове. Нас ни интересуват Е2Е тестовете. Те се пазят в `cypress/e2e`. Всички Cypress тестове се пазят във файлове с разширение `cy.js`. В `cypress/e2e` има файл `registration.cy.js`, който пази е2е тестове, свързани със формата за регистрация.

##### describe

Методът `describe` служи за групиране на всички, тестове свързани с даден модул. В случая в `describe('Registration tests', () => { ... })` се слагат всички тестове, свързани с регистрация.

##### beforeEach

Методът `beforeEach` се изпълнява преди всеки тест. В случая:

```js
beforeEach(() => {
  cy.visit('http://localhost:8080/')
})
```

Cypress навигира към страницата `http://localhost:8080/` преди изпълнението на всеки тест.

##### it

Методът `it` дефинира отделен тест. Например:

```js
it('enter submit without valid user name',() => {
  cy.get('[data-test-id="submit"]').click();
  cy.get('[data-test-id="fullname-error"]').should('be.visible');
})
```

В този тест се проверява дали системата показва грешка, когато потребителят се опита да изпрати формата без да въведе валидно име.

 1. Функцията `cy.get('[data-test-id="submit"]').click()` кликва върху бутона за изпращане на формата.
 2. Функцията `cy.get('[data-test-id="fullname-error"]').should('be.visible')`  проверява дали съобщението за грешка за полето "fullname" е видимо.

Освен това в нашите тестове ние можем да симулираме въвеждането или избирането на данни. Например:

1. `cy.get('[data-test-id="email"').type("invalid_email")` въвежда невалиден имейл в полето "email".
2. `cy.get('[data-test-id="gender"').select("Male")` избира опцията "Male" от падащото меню за пол.

## Задание

След като подкарали приложението и сте видял Cypress как работи трябва да изпълните следните задачи:
1. Добавете е2е тестове към `registration.cy.js`, в които тествате останалите полета на формата регистрация. Във всеки тест трябва да въведете невалидна стойност в полета и да видите дали се появило съобщение за грешка.
2. Добавете към приложението Login форма. Създайте е2е тестове за нея във файл  `login.cy.js`.
